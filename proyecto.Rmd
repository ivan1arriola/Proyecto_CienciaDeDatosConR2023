---
title: "Proyecto"
output: html_document
date: "2023-06-14"
---

```{r}
library(tidyverse)
library(DBI)
library(RPostgres)
```

```{r variablesDeEntorno, eval=FALSE}
usethis::edit_r_environ(
  scope = "project"
)
```


```{r}
con <- DBI::dbConnect(
  RPostgres::Postgres(),
  host = Sys.getenv("DB_HOST"),
  port = Sys.getenv("DB_PORT"),
  user = Sys.getenv("DB_USER"),
  password = Sys.getenv("DB_PASS"),
  dbname = Sys.getenv("DB_NAME")
)
```


```{r}
# Obtener las tablas de la base de datos
tablas <- DBI::dbListTables(con)

# Imprimir las tablas
print(tablas)
```



```{r}
(
  d_sensores <- DBI::dbGetQuery(
  con,
  "SELECT * FROM d_sensores"
  )
)
```

```{r Mapa De Sensores}
library(leaflet)

map <- leaflet() %>%
  addTiles() %>%
  addMarkers(data = d_sensores, lat = ~latitud, lng = ~longitud,
             label = ~paste(dsc_avenida, " - ", dsc_int_anterior, " - ", dsc_int_siguiente))

map

```




